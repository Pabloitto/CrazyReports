<script type="text/javascript">
    (function() {
        var po = document.createElement('script');
        po.type = 'text/javascript';
        po.async = true;
        po.src = 'https://plus.google.com/js/client:plusone.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(po, s);
    })();
</script>
<div ng-controller="LoginController" class="card card-container">
    <div id="gConnect">
        <button class="g-signin" data-scope="https://www.googleapis.com/auth/plus.login" data-requestvisibleactions="http://schemas.google.com/AddActivity" data-clientId="1083741151042-2t6pc9mrhu58pbc8cmbigtd2fcvbfkiu.apps.googleusercontent.com" data-callback="onSignInCallback" data-theme="dark" data-cookiepolicy="single_host_origin">
        </button>
    </div>
</div>
<script type="text/javascript">
    var helper = (function() {
        var BASE_API_PATH = 'plus/v1/';

        return {
            /**
             * Hides the sign in button and starts the post-authorization operations.
             *
             * @param {Object} authResult An Object which contains the access token and
             *   other authentication information.
             */
            onSignInCallback: function(authResult) {
                gapi.client.load('plus', 'v1', function() {
                    console.log('authResult', authResult);
                    window.location = '#/home/'
                });
            },

            /**
             * Calls the OAuth2 endpoint to disconnect the app for the user.
             */
            disconnect: function() {
                // Revoke the access token.
                $.ajax({
                    type: 'GET',
                    url: 'https://accounts.google.com/o/oauth2/revoke?token=' +
                        gapi.auth.getToken().access_token,
                    async: false,
                    contentType: 'application/json',
                    dataType: 'jsonp',
                    success: function(result) {
                        console.log('revoke response: ' + result);
                    },
                    error: function(e) {
                        console.log(e);
                    }
                });
            },

            /**
             * Gets and renders the list of people visible to this app.
             */
            people: function() {
                var request = gapi.client.plus.people.list({
                    'userId': 'me',
                    'collection': 'visible'
                });
                request.execute(function(people) {

                });
            },

            /**
             * Gets and renders the currently signed in user's profile data.
             */
            profile: function() {
                var request = gapi.client.plus.people.get({
                    'userId': 'me'
                });
                request.execute(function(profile) {

                });
            }
        };
    })();

    function onSignInCallback(authResult) {
        helper.onSignInCallback(authResult);
    }
</script>